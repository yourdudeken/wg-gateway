<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W-G Gateway - Dashboard</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <h1>W-G Gateway</h1>
                <p class="subtitle">WireGuard VPS-to-Home Gateway Manager</p>
            </div>
            <div class="status-badge" id="statusBadge">
                <span class="status-dot"></span>
                <span class="status-text">Loading...</span>
            </div>
        </header>

        <div class="dashboard">
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">[P]</div>
                    <div class="stat-content">
                        <h3 id="peerCount">0</h3>
                        <p>Active Peers</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">[S]</div>
                    <div class="stat-content">
                        <h3 id="serviceCount">0</h3>
                        <p>Services</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">[V]</div>
                    <div class="stat-content">
                        <h3 id="vpsIP">-</h3>
                        <p>VPS IP</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">[OK]</div>
                    <div class="stat-content">
                        <h3 id="readyStatus">-</h3>
                        <p>Status</p>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="content-grid">
                <!-- Configuration Panel -->
                <div class="panel">
                    <div class="panel-header">
                        <h2>Configuration</h2>
                        <button class="btn btn-secondary" onclick="loadConfig()">Refresh</button>
                    </div>
                    <div class="panel-body">
                        <form id="configForm" onsubmit="updateConfig(event)">
                            <div class="form-group">
                                <label>VPS IP Address</label>
                                <input type="text" id="vpsIpInput" placeholder="1.2.3.4" required>
                            </div>
                            <div class="form-group">
                                <label>SSH User</label>
                                <input type="text" id="vpsUserInput" placeholder="root" required>
                            </div>
                            <div class="form-group">
                                <label>Proxy Email</label>
                                <input type="email" id="proxyEmailInput" placeholder="admin@example.com" required>
                            </div>
                            <div class="form-group">
                                <label>Project Name</label>
                                <input type="text" id="projectInput" placeholder="home-gateway" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Update Configuration</button>
                        </form>
                    </div>
                </div>

                <!-- Peers Panel -->
                <div class="panel">
                    <div class="panel-header">
                        <h2>Peers</h2>
                        <button class="btn btn-primary" onclick="showAddPeerModal()">Add Peer</button>
                    </div>
                    <div class="panel-body">
                        <div id="peersList" class="list-container">
                            <p class="empty-state">No peers configured</p>
                        </div>
                    </div>
                </div>

                <!-- Services Panel -->
                <div class="panel panel-full">
                    <div class="panel-header">
                        <h2>Services</h2>
                        <button class="btn btn-primary" onclick="showAddServiceModal()">Add Service</button>
                    </div>
                    <div class="panel-body">
                        <div id="servicesList" class="list-container">
                            <p class="empty-state">No services configured</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Peer Modal -->
    <div id="addPeerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Peer</h2>
                <button class="modal-close" onclick="closeModal('addPeerModal')">&times;</button>
            </div>
            <form onsubmit="addPeer(event)">
                <div class="form-group">
                    <label>Peer Name</label>
                    <input type="text" id="peerName" placeholder="warehouse-lab" required>
                </div>
                <div class="form-group">
                    <label>WireGuard IP</label>
                    <input type="text" id="peerIP" placeholder="10.0.0.3" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addPeerModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Peer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Service Modal -->
    <div id="addServiceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Service</h2>
                <button class="modal-close" onclick="closeModal('addServiceModal')">&times;</button>
            </div>
            <form onsubmit="addService(event)">
                <div class="form-group">
                    <label>Domain</label>
                    <input type="text" id="serviceDomain" placeholder="myapp.com" required>
                </div>
                <div class="form-group">
                    <label>Port</label>
                    <input type="number" id="servicePort" placeholder="8080" min="1" max="65535" required>
                </div>
                <div class="form-group">
                    <label>Target Peer</label>
                    <select id="servicePeer" required>
                        <option value="">Select a peer...</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                        onclick="closeModal('addServiceModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Service</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>

</html>